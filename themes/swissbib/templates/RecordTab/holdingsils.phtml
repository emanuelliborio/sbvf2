<?php

/** @var	 VuFind\Auth\Manager	$account  */
$account		= $this->auth()->getManager();
/** @var	Boolean|Object			$user  */
//$user			= $account->isLoggedIn();
//$holdings		= $this->driver->getRealTimeHoldings($account);
/** @var	VuFind\ILS\Connection	$ilsConnection  */
//$ilsConnection	= $this->ils();
/** @var	Swissbib\RecordDriver\SolrMarc	$recordDriver  */
$recordDriver	= $this->driver;
$holdings		= $recordDriver->getHoldings($account);

?>
<!-- begin: innerbox meine bibliotheken -->
<div class="innerbox grey">
	<h3 class="toggler persist collapsed" id="library_toggler_meine-bibliotheken"><span class="icon_favorit_library">Meine Bibliotheken</span></h3>
	<div class="library_toggler_meine-bibliotheken">

		<!-- begin: innerbox -->
		<div class="innerbox">
			<h4>Historisches Seminar</h4>
			<ul class="actions">
				<li>
					<a href="#" class="linkbutton primary icon_link_primary" title="Zum Bestand"><span>Zum Bestand</span></a>
				</li>
				<li>
					<a href="#" class="linkbutton icon_show toggler collapsed" title="Informationen zum Bestand" id="stock_toggler_meine-bibliotheken_historisches-seminar"><span>Informationen zum Bestand</span></a>
				</li>
			</ul>
			<ul class="miniactions boxed">
				<li class="miniaction_favorite_remove">
					<a href="#" title="Bibliothek aus Favoriten entfernen">Bibliothek aus Favoriten entfernen</a>
				</li>
				<li class="miniaction_link">
					<a href="http://aleph.unibas.ch" class="externallink" title="Historisches Seminar">http://aleph.unibas.ch</a>
				</li>
			</ul>

			<div class="stock_toggler_meine-bibliotheken_historisches-seminar">
				<table>
					<thead>
						<tr>
							<th>Standort</th>
							<th>Signatur</th>
							<th>Exemplarstatus</th>
							<th>Ausleihstatus</th>
							<th>Bechreibung</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>-</td>
							<td>Gd XIII 3836</td>
							<td>ausleihbar</td>
							<td>erh√§ltlich</td>
							<td>Diest ist ein Beschreibungstext.</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div><!-- end: innerbox -->

	</div>
</div>
<!-- end: innerbox meine bibliotheken -->


<?php foreach($holdings as $networkCode => $network): ?>

	<!-- begin: innerbox <?=$networkCode?> -->
	<div class="innerbox grey">
		<h3 class="toggler persist collapsed" id="library_toggler_<?=$networkCode?>"><?=$this->escapeHtml($network['label'])?><?php /*IDS Basel / Bern*/ ?></h3>
		<div class="library_toggler_<?=$networkCode?>">

			<div class="innerbox">

				<?php foreach($network['institutions'] as $institutionCode => $institution): ?>

					<h4><?=$this->escapeHtml($institution['label'])?><?php /*Historisches Seminar*/ ?></h4>
					<ul class="actions">
						<li>
							<a href="#" class="linkbutton primary icon_link_primary" title="Zum Bestand"><span>Zum Bestand</span></a>
						</li>
						<li>
							<a href="#" class="linkbutton icon_show toggler collapsed" title="Informationen zum Bestand" id="stock_toggler_<?=$networkCode?>_<?=$institutionCode?>">
								<span>Informationen zum Bestand</span>
							</a>
						</li>
					</ul>
					<ul class="miniactions boxed">
						<li class="miniaction_favorite_remove">
							<a href="#" title="Bibliothek aus Favoriten entfernen">Bibliothek aus Favoriten entfernen</a>
						</li>
						<li class="miniaction_link">
							<a href="http://aleph.unibas.ch" class="externallink" title="Bibliothek Historisches Seminar">http://aleph.unibas.ch</a>
						</li>
					</ul>

					<div class="stock_toggler_<?=$networkCode?>_<?=$institutionCode?>">
						<table>
							<thead>
								<tr>
									<th>Standort</th>
									<th>Signatur</th>
									<th>Exemplarstatus</th>
									<th>Ausleihstatus</th>
									<th>Beschreibung</th>
									<th>&nbsp;</th>
								</tr>
							</thead>
							<tbody>
								<?php

										// Items
									if( isset($institution['items'])) {
										foreach($institution['items'] as $item) {
											echo $this->render('record/holdingsils_item.phtml', array(
												'item'	=> $item
											));
										}
									}

										// Holdings
									if( isset($institution['holdings'])) {
										foreach($institution['holdings'] as $holding) {
											echo $this->render('record/holdingsils_holding.phtml', array(
												'holding'	=> $holding
											));
										}
									}

								?>
							</tbody>
						</table>
					</div>

				<?php endforeach; ?>

			</div>
		</div>
	</div>
	<!-- end: innerbox <?=$networkCode?> -->

<?php endforeach; ?>