<?php

/** @var    \Swissbib\RecordDriver\SolrMarc $driver */
$institutions    = $driver->getInstitutions();
$institutions    = $this->filterUntranslatedInstitutions($institutions);
$amountHoldings  = sizeof($institutions);
$urldisplay      = $this->urlDisplay($driver);

?>

<? if ($amountHoldings === 1): ?>
    <p>1 <?= $this->transEsc('result.library') ?></p>
    <? if (in_array('RETROS', $urldisplay['unions'])): ?>
        <a class="linkbutton primary icon_link_primary" href="<?= $urldisplay['urls'][1]['url'] ?>" target="_blank"><span>retro.seals</span></a>
    <? endif; ?>

<? elseif ($amountHoldings > 1): ?>
    <p><?= $amountHoldings ?> <?= $this->transEsc('result.libraries') ?></p>
    <? if (in_array('RETROS', $urldisplay['unions'])): ?>
        <a class="linkbutton primary icon_link_primary" href="<?= $urldisplay['urls'][1]['url'] ?>" target="_blank"><span>retro.seals</span></a>
    <? endif; ?>

<? else: ?>
    <? if (in_array('RETROS', $urldisplay['unions'])): ?>
        <a class="linkbutton primary icon_link_primary" href="<?= $urldisplay['urls'][1]['url'] ?>" target="_blank"><span>retro.seals</span></a>
    <? elseif ($urldisplay['online']): ?>
        <a class="linkbutton primary icon_link_primary" href="<?= $urldisplay['urls'][1]['url'] ?>" target="_blank"><span>retro.seals</span></a>
    <? else: ?>
    <p>There are no holdings available in the system</p>
    <? endif; ?>
<? endif; ?>
