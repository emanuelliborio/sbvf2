<?php
	/** @var	Swissbib\RecordDriver\SolrMarc	$resultItem  */
	/** @var	VuFind\View\Helper\Root\Record		$viewRecord  */
$resultItem		= $this->driver;
$viewRecord		= $this->record($this->driver);
$thumbnail		= $viewRecord->getThumbnail('small');
$thumbnailSrc	= $thumbnail ? $thumbnail : $this->url('cover-unavailable');
$detailLink		= $this->recordLink()->getUrl($resultItem);
//$title			= $resultItem->getShortTitle();
$title			= $this->mainTitle($resultItem->getShortTitle());
$edition		= $resultItem->getEdition();
$publicationDate= $this->publicationDateMarc($resultItem->getPublicationDates())

?>

<tr>
    <!-- Column 1: Index -->
	<td class="small center nodivider"><?=$this->recordIndex?></td>
    <!-- Column 2: Memo list -->
	<td class="nodivider">
		<a href="#" class="icon_notepad_add" title="Zur Merkliste hinzufügen">Zur Merkliste hinzufügen</a>
	</td>
    <!-- Column 3: Teaser-image / Thumbnail -->
	<td class="right nodivider">
		<a href="<?=$detailLink?>" title="<?=$title?>">
            <? /** ---------------------------------------------------- */ ?>
            <? /** temporary fix params over here, @todo: fix in driver */ ?>
            <? if(is_array($title)) $title = implode(' ', $title); ?>
            <? /** ---------------------------------------------------- */ ?>
			<img src="<?=$thumbnailSrc?>" alt="<?=$title?>" class="dropshadow"/>
		</a>
	</td>
    <!-- Column 4: Title and author details => links to full-view -->
	<td>
		<h3><a href="<?=$detailLink?>" title="<?=$title?>" class="color"><?=$title?></a></h3>
		<p>
			<?php /*var_dump($solrRecord->getSummary())*/?>
		</p>
        <!-- meta -->
		<div class="meta">
            <span><?=$resultItem->getSubtitle()?></span><br />
            <h6><?=$this->transEsc('Author')?>:</h6>
            <span><?=$resultItem->getTitleStatement()?></span><br/>
        </div>
        <div class="meta">
			<h6><?=$this->transEsc('Year')?>:</h6>
            <span><?=$this->escapeHtml($publicationDate)?></span>
            <?php if($edition): ?>
                <h6><?=$this->transEsc('Edition')?>:</h6>
                <span><?=$this->escapeHtml($edition)?></span>
            <?php endif; ?>
		</div>
        <!-- format -->
		<div class="format">
			<?=$viewRecord->getFormatList()?>
        <!-- <h6 class="icon_format_book">Buch</h6> -->
            <?php if(!empty($groupID)): ?>
                <a href="#frbr.html" class="linkbutton icon_show" title="<?=$this->transEsc('FRBR_Button')?>">
					<span><?=$this->transEsc('FRBR_Button')?></span>
				</a>
            <?php endif; ?>
		</div>
	</td>

    <!-- Column 5 & 6 : libraries, links, info -->
	<td class="small right nodivider">
		<?=$this->render('search/results/available.phtml')?>
	</td>
	<td class="right">
		<?=$this->render('search/results/libraries.phtml')?>
	</td>
</tr>