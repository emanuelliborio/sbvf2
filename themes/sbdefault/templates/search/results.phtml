<?
    // Set up page title:
    $lookfor = $this->results->getParams()->getDisplayQuery();
    if (isset($this->overrideTitle)) {
        $this->headTitle($this->overrideTitle);
    } else {
        $this->headTitle($this->translate('Search Results') . (empty($lookfor) ? '' : " - {$lookfor}"));
    }


    // Set up breadcrumbs:
    if (isset($this->overrideTitle)) {
        $this->layout()->breadcrumbs = '<em>' . $this->escapeHtml($this->overrideTitle) . '</em>';
    } else {
        $this->layout()->breadcrumbs = '<em>' . $this->transEsc('Search') . ': ' .
            $this->escapeHtml($lookfor) . '</em>';
    }


?>

<!--
 was machen wir mit den JavaScript Funktionen check_item_statuses.js und check_save_statuses
  s. -> Vufind results.phtml
-->



<h1>Anzahl Treffer fuer <cite><?=$this->results->getParams()->getDisplayQuery()?></cite><?=$this->results->getResultTotal()?></h1>

<form id="RefineHitListForm" method="get" action="" class="RefineHitListForm">
    <input type="hidden" name="methodToCall" value="refineHitList" />
    <input type="hidden" name="currentSearchContext" value="search" />



        <?= $this->render("search/controls/tools-floatbox-top.phtml") ?>


        <table class="data">
        <colgroup>
        <col width="3%"/>
        <col width="10%"/>
        <col width="7%"/>
        <col width="*"/>
        <col width="13%"/>
        </colgroup>
        <caption class="hidden">Suchergebnisse für Begriff &quot;Marke&quot;</caption>
        <thead class="hidden">
            <tr>
                <th>Nummer</th>
                <th>Merkliste</th>
                <th>Bild</th>
                <th>Beschreibung</th>
                <th>Verfügbarkeit</th>
            </tr>
        </thead>
        <tbody>

        <?=$this->render('search/list-' . $this->results->getParams()->getView() . '.phtml')?>

        </tbody>
        </table>


    <?= $this->render("search/controls/tools-floatbox-bottom.phtml") ?>

    </form>

    <?= $this->render("search/controls/pagefunctions.phtml") ?>


<!-- was gibt es noch fuer andere Arten von recommendations?
kann es nicht passieren, dass bei side mehr als ueber ein Objekt iteriert wird?
-->
<? foreach ($this->results->getRecommendations('side') as $current):


$this->facetControl = array("visibility" => "_selected", "tabsequence" => "tabbed_4", "hasfacets" => true,
                 "recommend" => $current   );
$this->placeholder("sideBarTab1")->append($this->render('search/facets.1tab.sidebar.phtml'));
unset ($this->facetControl);

endforeach;



$this->layout()->notepadsingle = $this->partial('search/notepad-single.phtml') ?>




